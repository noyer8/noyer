<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NOYER ‚Äî Questionnaire</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #0a0a0a;
      --accent: #26d19a;
      --accent-hover: #1ea97b;
      --text: #e5e5e5;
      --muted: #9a9a9a;
      --panel: #111;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: 'JetBrains Mono', monospace;
      min-height: 100vh;
      padding: 40px 20px 80px;
      position: relative;
    }

    /* üü© LOGO CLIQUABLE */
    .logo {
      position: absolute;
      top: 25px;
      left: 40px;
      cursor: pointer;
      z-index: 10;
    }
    .logo img {
      height: 120px;
      width: auto;
    }

    h1 {
      color: var(--accent);
      text-align: center;
      font-size: 2rem;
      margin-top: 120px;
      margin-bottom: 40px;
      letter-spacing: 2px;
    }

    form {
      max-width: 900px;
      background: var(--panel);
      border-radius: 16px;
      padding: 30px;
      margin: 0 auto;
      box-shadow: 0 0 20px rgba(0, 255, 170, 0.05);
    }

    label {
      display: block;
      margin-top: 25px;
      font-weight: 600;
      color: var(--accent);
    }

    input[type="text"],
    input[type="email"] {
      width: 100%;
      padding: 12px;
      margin-top: 8px;
      border-radius: 8px;
      border: 1px solid var(--accent);
      background: transparent;
      color: var(--text);
      font-size: 0.95rem;
    }

    input[readonly] {
      background-color: #1b1b1b;
      color: #ccc;
    }

    button, .btn {
      background-color: var(--accent);
      color: #000;
      font-weight: bold;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      margin-top: 30px;
      cursor: pointer;
      font-size: 1rem;
      transition: 0.3s;
      text-decoration: none;
      display: inline-block;
    }

    button:hover, .btn:hover {
      background-color: var(--accent-hover);
      transform: translateY(-2px);
    }

    .facebook-btn {
      background-color: #1877F2;
      color: white;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      margin-top: 20px;
      cursor: pointer;
    }

    .facebook-btn:hover {
      background-color: #145dbf;
    }

    .descriptions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .card {
      background: #121212;
      border: 1px solid #1f1f1f;
      border-radius: 10px;
      padding: 20px;
      color: var(--text);
      cursor: pointer;
      transition: 0.3s ease;
    }

    .card:hover {
      border-color: var(--accent);
      transform: translateY(-3px);
    }

    .card input[type="radio"] {
      margin-right: 10px;
    }

    footer {
      text-align: center;
      color: var(--muted);
      font-size: 0.9rem;
      margin-top: 50px;
    }

    .footer-links {
      margin-top: 8px;
    }

    .footer-links a {
      color: var(--accent);
      margin: 0 8px;
      text-decoration: none;
    }

    .footer-links a:hover {
      color: var(--accent-hover);
    }

    #loading {
      display: none;
      text-align: center;
      margin-top: 20px;
      color: var(--muted);
      font-style: italic;
    }
  </style>
</head>

<body>

  <!-- üü© LOGO CLIQUABLE -->
  <div class="logo" onclick="window.location.href='index.html'">
    <img src="https://i.imgur.com/3V2jomn.png" alt="Logo Noyer">
  </div>

  <h1>COMPL√âTEZ VOS INFORMATIONS</h1>

  <form id="questionForm" action="https://pierre07.app.n8n.cloud/webhook/infosclients" method="POST">

    <label>üè¢ Nom de l‚Äôagence</label>
    <input type="text" id="agencyName" name="agencyName" readonly />

    <label>üìß Adresse e-mail de contact</label>
    <input type="email" name="email" placeholder="ex : contact@votreagence.fr" required>

    <label>üñºÔ∏è URL du logo (facultatif)</label>
    <input type="text" name="logoUrl" placeholder="https://www.votreagence.fr/logo.png">

    <!-- Bouton Facebook -->
    <button type="button" class="facebook-btn" onclick="loginWithFacebook()">Se connecter √† Facebook</button>

    <label style="margin-top:30px;">üìù Choisissez la description qui vous correspond le mieux :</label>

    <div class="descriptions">
      <label class="card">
        <input type="radio" name="descriptionChoice" value="1" required>
        <strong>√Ä vendre ‚Äì Maison familiale de 130 m¬≤ dans un secteur recherch√©</strong><br><br>
        D√©couvrez cette charmante maison qui allie √©l√©gance, confort et fonctionnalit√©.<br><br>
        Elle se compose d‚Äôun vaste s√©jour lumineux ouvert sur une cuisine moderne et √©quip√©e, id√©ale pour partager des moments conviviaux en famille.<br><br>
        √Ä l‚Äôext√©rieur, profitez d‚Äôun jardin paysag√© avec terrasse et garage privatif.
      </label>

      <label class="card">
        <input type="radio" name="descriptionChoice" value="2">
        <strong>üè° Maison familiale pleine de charme ‚Äì √† d√©couvrir sans attendre !</strong><br><br>
        130 m¬≤ de confort et de lumi√®re dans un quartier calme et recherch√©.<br><br>
        Cette superbe maison s√©duit par son vaste s√©jour, sa cuisine moderne, et ses 4 chambres spacieuses.<br><br>
        √Ä l‚Äôext√©rieur, un jardin arbor√© et une terrasse ensoleill√©e offrent un cadre de d√©tente id√©al.
      </label>

      <label class="card">
        <input type="radio" name="descriptionChoice" value="3">
        <strong>‚ú® Coup de c≈ìur assur√© pour cette belle maison familiale !</strong><br><br>
        On tombe imm√©diatement sous le charme de cette maison de 130 m¬≤, baign√©e de lumi√®re.<br><br>
        Elle offre un grand s√©jour ouvert sur une cuisine moderne, 4 chambres confortables, et un jardin accueillant.<br><br>
        Situ√©e dans un quartier calme et verdoyant, proche des commodit√©s.
      </label>
    </div>

    <button type="submit">Envoyer</button>
    <p id="loading">‚è≥ Envoi en cours...</p>

  </form>

  <footer>
    ¬© 2025 Noyer ‚Äî Publication Automatique
    <div class="footer-links">
      <a href="confidentialite.html">Politique de confidentialit√©</a> ¬∑
      <a href="mentions-legales.html">Mentions l√©gales</a> ¬∑
      <a href="conditions-utilisation.html">CGU</a> ¬∑
      <a href="conditions-vente.html">CGV</a>
    </div>
  </footer>

  <!-- Facebook SDK -->
  <script async defer crossorigin="anonymous"
    src="https://connect.facebook.net/fr_FR/sdk.js"></script>

  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '2451194691945458',
        cookie     : true,
        xfbml      : true,
        version    : 'v21.0'
      });
    };

    function loginWithFacebook() {
      FB.login(function(response) {
        if (response.authResponse) {
          const accessToken = response.authResponse.accessToken;

          fetch("https://pierre07.app.n8n.cloud/webhook/facebook_login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ token: accessToken })
          });

          alert("Connexion r√©ussie !");
        } else {
          console.log('‚ùå Connexion annul√©e.');
        }
      }, {scope: 'email,pages_show_list,pages_manage_posts,pages_read_engagement'});
    }

    document.addEventListener("DOMContentLoaded", () => {
      const agencyName = localStorage.getItem("agencyName");
      if (agencyName) {
        document.getElementById("agencyName").value = agencyName;
      }

      const form = document.getElementById("questionForm");
      const loading = document.getElementById("loading");

      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        loading.style.display = "block";

        const formData = new FormData(form);
        const data = Object.fromEntries(formData.entries());

        try {
          const response = await fetch(form.action, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
          });

          if (response.ok) {
            loading.textContent = "‚úÖ Formulaire envoy√© avec succ√®s !";
            setTimeout(() => {
              window.location.href = "fonctionnement.html";
            }, 1000);
          } else {
            loading.textContent = "‚ö†Ô∏è Une erreur est survenue, veuillez r√©essayer.";
          }
        } catch (error) {
          loading.textContent = "‚ùå Erreur de connexion.";
        }
      });
    });
  </script>

</body>
</html>
