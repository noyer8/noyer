<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Connexion Facebook ‚Äî Noyer</title>

  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #000;
      --text: #e7e7e7;
      --muted: #8f8f8f;
      --panel: #111;
      --accent: #26d19a;
      --accent-dark: #1ea97b;
    }

    body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      font-family: "JetBrains Mono", monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    header {
      width: 100%;
      padding: 30px 40px;
      display: flex;
      align-items: center;
    }

    header img {
      height: 100px;
      cursor: pointer;
    }

    .container {
      max-width: 650px;
      text-align: center;
      margin-top: 40px;
      padding: 30px;
      background: var(--panel);
      border-radius: 16px;
      border: 1px solid rgba(38,209,154,0.15);
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }

    h1 {
      color: var(--accent);
      font-size: 2rem;
      margin-bottom: 10px;
      letter-spacing: .1em;
    }

    p {
      line-height: 1.6;
      color: var(--muted);
      margin-bottom: 22px;
      font-size: .95rem;
    }

    .steps {
      text-align: left;
      background: #0c0c0c;
      padding: 18px 20px;
      border-radius: 10px;
      border: 1px solid rgba(38,209,154,0.15);
      margin-bottom: 30px;
    }

    .steps h3 {
      font-size: 1rem;
      color: var(--accent);
      margin-bottom: 12px;
    }

    .steps li {
      margin-bottom: 10px;
      color: var(--text);
      font-size: .9rem;
    }

    #fb-btn {
      margin-top: 25px;
      padding: 14px 26px;
      background: var(--accent);
      border: none;
      border-radius: 10px;
      color: #08241a;
      font-weight: bold;
      font-size: 1rem;
      cursor: pointer;
      transition: .2s;
    }

    #fb-btn:hover {
      background: var(--accent-dark);
      transform: translateY(-2px);
    }

    footer {
      margin-top: 60px;
      color: var(--muted);
      font-size: .85rem;
      text-align: center;
    }

    footer a {
      color: var(--accent);
      text-decoration: none;
    }
  </style>

  <!-- SDK Facebook (gard√© m√™me si non utilis√© pour login) -->
  <script async defer crossorigin="anonymous"
    src="https://connect.facebook.net/fr_FR/sdk.js"></script>

</head>

<body>

<header>
  <a href="index.html">
    <img src="https://i.imgur.com/3V2jomn.png" alt="Logo Noyer">
  </a>
</header>

<div class="container">

  <h1>Connexion Facebook</h1>
  <p>
    Pour activer la publication automatique de vos biens immobiliers,
    vous devez connecter votre Page Facebook professionnelle √† Noyer.
    <br><br>
    Cette √©tape est 100% s√©curis√©e et prend moins de 30 secondes.
  </p>

  <div class="steps">
    <h3>üîê Pourquoi cette connexion est n√©cessaire ?</h3>
    <ul>
      <li>‚úì Publier automatiquement vos nouvelles annonces</li>
      <li>‚úì G√©rer vos photos et descriptions optimis√©es</li>
      <li>‚úì V√©rifier chaque jour si de nouveaux biens sont disponibles</li>
      <li>‚úì Poster au meilleur moment pour maximiser votre visibilit√©</li>
    </ul>
  </div>

  <p>
    En cliquant sur ‚ÄúSe connecter avec Facebook‚Äù, vous acceptez de donner
    les permissions n√©cessaires pour publier en votre nom, uniquement sur
    votre Page professionnelle.
  </p>

  <button id="fb-btn" onclick="loginWithFacebook()">
    Se connecter avec Facebook
  </button>

</div>

<footer>
  ¬© 2025 Noyer ‚Äî Publication Automatique<br>
  <a href="confidentialite.html">Politique de confidentialit√©</a> ¬∑
  <a href="mentions-legales.html">Mentions l√©gales</a>
</footer>

<script>
  /** 
   * LOGIN OFFICIEL PAR OAUTH (obligatoire pour Instagram Business)
   * On ouvre la popup Facebook avec les permissions correctes.
   */
  function loginWithFacebook() {
    const appId = "2451194691945458";
    const redirectUri = "https://noyer-backend.onrender.com/auth/facebook/callback";

    const scopes = [
      "pages_manage_posts",
      "pages_read_engagement",
      "pages_show_list",
      "instagram_basic",
      "instagram_content_publish",
      "business_management"
    ].join(",");

    const oauthUrl = 
      "https://www.facebook.com/v19.0/dialog/oauth" +
      "?client_id=" + appId +
      "&redirect_uri=" + encodeURIComponent(redirectUri) +
      "&response_type=code" +
      "&scope=" + encodeURIComponent(scopes) +
      "&state=secure_noyer_123";

    window.location.href = oauthUrl;
  }
</script>

</body>
</html>
